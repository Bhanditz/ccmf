var ccmf=ccmf||{};ccmf.namespace=function(a){a=a.split(".");var c=ccmf;"ccmf"===a[0]&&(a=a.slice(1));for(var b=0;b<a.length;b+=1)"undefined"===c[a[b]]&&(c[a[b]]={}),c=c[a[b]];return c};ccmf.Core=ccmf.namespace("Core");ccmf.Core=function(){return new ccmf.Core};ccmf.Core.prototype={init:function(){}};ccmf.namespace("ccmf.Data");ccmf.Data=function(){};ccmf.Data.create=function(){return new ccmf.Data};
ccmf.Data.prototype={rootRef:null,endpoint:"https://ccmf.firebaseio.com",init:function(){"undefined"==typeof Firebase&&(Firebase=require("firebase"));this.rootRef=new Firebase(this.endpoint)},currentDomain:function(){return window.location.host},currentPathURL:function(){return btoa(window.location.pathname)},escapeEmail:function(a){if(!a)return!1;a=a.toLowerCase();return a=a.replace(/\./g,"::")},storeLsh:function(a,c,b){this.init();var f=ccmf.Text.create(),h=null,e=this.rootRef.child("bands"),n=
this.rootRef.child("users"),d=null,p=null,q=null,r=null,s=null,g=null;void 0==c&&(c=function(a){a?console.log("Data could not be saved."+a):console.log("Data saved successfully.")});h=f.LSH(a);for(r=0;r<a.length;r++)void 0==b?b=null:(g=this.escapeEmail(b.author.email),d=n.child(g),d.child("works").push(JSON.stringify(a[r])),n.child(g).once("value",function(d){if(null===d.val())throw c(!0),Error("storeLSH: author is not registered");for(q=0;q<f.bands;q++)for(r=0;r<a.length;r++)p=e.child(q),s={},s.sig=
a[r],s.metadata=b,p.child(h.hashSet[q][r]).push(JSON.stringify(s),c)}))},conductLsh:function(a,c){this.init();for(var b=ccmf.Text.create(),f=null,h=this.rootRef.child("bands"),e=null,n=null,d=e=null,p=0,q=[],r=[],s=null,f=b.LSH(a),n=0;n<b.bands;n++)for(d=0;d<a.length;d++)e=h.child(n),e=e.child(f.hashSet[n][d]),e.once("value",function(a){p+=1;if(null!=a.val()){for(var d=a.val(),e=Object.keys(d),k=null,f=[],k=0;k<e.length;k++){var h=d[e[k]],n=JSON.parse(h);f.push(n);-1==r.indexOf(h)&&r.push(h)}s={ref:a.ref().toString(),
json:f,raw:a.val()};q.push(s)}p==b.bands&&c({count:r.length,sets:r,raw:q})})},deleteLsh:function(a,c){this.init();var b=ccmf.Text.create(),f=null,h=this.rootRef.child("bands"),e=this.rootRef.child("users"),n=null,d=null,p=null,q=null,r=function(c){if(null!=c.val()){for(var b=c.val(),d=Object.keys(b),e=null,e=0;e<d.length;e++){var f=JSON.parse(b[d[e]]);g(f.sig,a[0])&&c.child(d[e]).ref().remove()}authorRef.child("works").once("value",s)}},s=function(c){if(null!=c.val())for(var b=c.val(),e=Object.keys(b),
d=null,d=0;d<e.length;d++){var f=JSON.parse(b[e[d]]);g(f,a[0])&&c.child(e[d]).ref().remove()}},g=function(a,c){for(var b=0;b<a.length;b++)if(a[b]!==c[b])return!1;return!0},f=b.LSH(a);escapedEmail=this.escapeEmail(c.author.email);authorRef=e.child(escapedEmail);e.child(escapedEmail).once("value",function(c){if(null===c.val())throw Error("storeLSH: author is not registered");for(d=0;d<b.bands;d++)for(q=0;q<a.length;q++)n=h.child(d),p=n.child(f.hashSet[d][q]),p.once("value",r)})}};var Sha1={hash:function(a,c){("undefined"==typeof c||c)&&(a=Utf8.encode(a));var b=[1518500249,1859775393,2400959708,3395469782];a+=String.fromCharCode(128);for(var f=Math.ceil((a.length/4+2)/16),h=Array(f),e=0;e<f;e++){h[e]=Array(16);for(var n=0;16>n;n++)h[e][n]=a.charCodeAt(64*e+4*n)<<24|a.charCodeAt(64*e+4*n+1)<<16|a.charCodeAt(64*e+4*n+2)<<8|a.charCodeAt(64*e+4*n+3)}h[f-1][14]=8*(a.length-1)/Math.pow(2,32);h[f-1][14]=Math.floor(h[f-1][14]);h[f-1][15]=8*(a.length-1)&4294967295;for(var n=1732584193,
d=4023233417,p=2562383102,q=271733878,r=3285377520,s=Array(80),g,l,m,k,u,e=0;e<f;e++){for(var t=0;16>t;t++)s[t]=h[e][t];for(t=16;80>t;t++)s[t]=Sha1.ROTL(s[t-3]^s[t-8]^s[t-14]^s[t-16],1);g=n;l=d;m=p;k=q;u=r;for(t=0;80>t;t++){var v=Math.floor(t/20),v=Sha1.ROTL(g,5)+Sha1.f(v,l,m,k)+u+b[v]+s[t]&4294967295;u=k;k=m;m=Sha1.ROTL(l,30);l=g;g=v}n=n+g&4294967295;d=d+l&4294967295;p=p+m&4294967295;q=q+k&4294967295;r=r+u&4294967295}return Sha1.toHexStr(n)+Sha1.toHexStr(d)+Sha1.toHexStr(p)+Sha1.toHexStr(q)+Sha1.toHexStr(r)},
f:function(a,c,b,f){switch(a){case 0:return c&b^~c&f;case 1:return c^b^f;case 2:return c&b^c&f^b&f;case 3:return c^b^f}},ROTL:function(a,c){return a<<c|a>>>32-c},toHexStr:function(a){for(var c="",b,f=7;0<=f;f--)b=a>>>4*f&15,c+=b.toString(16);return c}},Utf8={encode:function(a){a=a.replace(/[\u0080-\u07ff]/g,function(a){a=a.charCodeAt(0);return String.fromCharCode(192|a>>6,128|a&63)});return a=a.replace(/[\u0800-\uffff]/g,function(a){a=a.charCodeAt(0);return String.fromCharCode(224|a>>12,128|a>>6&
63,128|a&63)})},decode:function(a){a=a.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(a){a=(a.charCodeAt(0)&15)<<12|(a.charCodeAt(1)&63)<<6|a.charCodeAt(2)&63;return String.fromCharCode(a)});return a=a.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(a){a=(a.charCodeAt(0)&31)<<6|a.charCodeAt(1)&63;return String.fromCharCode(a)})}},MD5={encode:function(a){function c(a,b){var c,d,e,f,g;e=a&2147483648;f=b&2147483648;c=a&1073741824;d=b&1073741824;g=(a&1073741823)+(b&1073741823);return c&
d?g^2147483648^e^f:c|d?g&1073741824?g^3221225472^e^f:g^1073741824^e^f:g^e^f}function b(a,b,e,d,f,g,h){a=c(a,c(c(b&e|~b&d,f),h));return c(a<<g|a>>>32-g,b)}function f(a,b,e,d,f,g,h){a=c(a,c(c(b&d|e&~d,f),h));return c(a<<g|a>>>32-g,b)}function h(a,b,d,e,f,g,h){a=c(a,c(c(b^d^e,f),h));return c(a<<g|a>>>32-g,b)}function e(a,b,d,e,f,g,h){a=c(a,c(c(d^(b|~e),f),h));return c(a<<g|a>>>32-g,b)}function n(a){var b="",c="",d;for(d=0;3>=d;d++)c=a>>>8*d&255,c="0"+c.toString(16),b+=c.substr(c.length-2,2);return b}
var d=[],p,q,r,s,g,l,m,k;a=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b}(a);d=function(a){var b,c=a.length;b=c+8;for(var d=16*((b-b%64)/64+1),e=Array(d-1),f=0,g=0;g<c;)b=(g-g%4)/4,f=8*(g%4),e[b]|=a.charCodeAt(g)<<f,g++;b=(g-g%4)/4;e[b]|=128<<8*(g%4);e[d-2]=c<<
3;e[d-1]=c>>>29;return e}(a);g=1732584193;l=4023233417;m=2562383102;k=271733878;for(a=0;a<d.length;a+=16)p=g,q=l,r=m,s=k,g=b(g,l,m,k,d[a+0],7,3614090360),k=b(k,g,l,m,d[a+1],12,3905402710),m=b(m,k,g,l,d[a+2],17,606105819),l=b(l,m,k,g,d[a+3],22,3250441966),g=b(g,l,m,k,d[a+4],7,4118548399),k=b(k,g,l,m,d[a+5],12,1200080426),m=b(m,k,g,l,d[a+6],17,2821735955),l=b(l,m,k,g,d[a+7],22,4249261313),g=b(g,l,m,k,d[a+8],7,1770035416),k=b(k,g,l,m,d[a+9],12,2336552879),m=b(m,k,g,l,d[a+10],17,4294925233),l=b(l,m,k,
g,d[a+11],22,2304563134),g=b(g,l,m,k,d[a+12],7,1804603682),k=b(k,g,l,m,d[a+13],12,4254626195),m=b(m,k,g,l,d[a+14],17,2792965006),l=b(l,m,k,g,d[a+15],22,1236535329),g=f(g,l,m,k,d[a+1],5,4129170786),k=f(k,g,l,m,d[a+6],9,3225465664),m=f(m,k,g,l,d[a+11],14,643717713),l=f(l,m,k,g,d[a+0],20,3921069994),g=f(g,l,m,k,d[a+5],5,3593408605),k=f(k,g,l,m,d[a+10],9,38016083),m=f(m,k,g,l,d[a+15],14,3634488961),l=f(l,m,k,g,d[a+4],20,3889429448),g=f(g,l,m,k,d[a+9],5,568446438),k=f(k,g,l,m,d[a+14],9,3275163606),m=f(m,
k,g,l,d[a+3],14,4107603335),l=f(l,m,k,g,d[a+8],20,1163531501),g=f(g,l,m,k,d[a+13],5,2850285829),k=f(k,g,l,m,d[a+2],9,4243563512),m=f(m,k,g,l,d[a+7],14,1735328473),l=f(l,m,k,g,d[a+12],20,2368359562),g=h(g,l,m,k,d[a+5],4,4294588738),k=h(k,g,l,m,d[a+8],11,2272392833),m=h(m,k,g,l,d[a+11],16,1839030562),l=h(l,m,k,g,d[a+14],23,4259657740),g=h(g,l,m,k,d[a+1],4,2763975236),k=h(k,g,l,m,d[a+4],11,1272893353),m=h(m,k,g,l,d[a+7],16,4139469664),l=h(l,m,k,g,d[a+10],23,3200236656),g=h(g,l,m,k,d[a+13],4,681279174),
k=h(k,g,l,m,d[a+0],11,3936430074),m=h(m,k,g,l,d[a+3],16,3572445317),l=h(l,m,k,g,d[a+6],23,76029189),g=h(g,l,m,k,d[a+9],4,3654602809),k=h(k,g,l,m,d[a+12],11,3873151461),m=h(m,k,g,l,d[a+15],16,530742520),l=h(l,m,k,g,d[a+2],23,3299628645),g=e(g,l,m,k,d[a+0],6,4096336452),k=e(k,g,l,m,d[a+7],10,1126891415),m=e(m,k,g,l,d[a+14],15,2878612391),l=e(l,m,k,g,d[a+5],21,4237533241),g=e(g,l,m,k,d[a+12],6,1700485571),k=e(k,g,l,m,d[a+3],10,2399980690),m=e(m,k,g,l,d[a+10],15,4293915773),l=e(l,m,k,g,d[a+1],21,2240044497),
g=e(g,l,m,k,d[a+8],6,1873313359),k=e(k,g,l,m,d[a+15],10,4264355552),m=e(m,k,g,l,d[a+6],15,2734768916),l=e(l,m,k,g,d[a+13],21,1309151649),g=e(g,l,m,k,d[a+4],6,4149444226),k=e(k,g,l,m,d[a+11],10,3174756917),m=e(m,k,g,l,d[a+2],15,718787259),l=e(l,m,k,g,d[a+9],21,3951481745),g=c(g,p),l=c(l,q),m=c(m,r),k=c(k,s);return(n(g)+n(l)+n(m)+n(k)).toLowerCase()}},MinHashFn={Generate:function(){return[function(a){return(938243813*a+449548425)%4294967296},function(a){return(3501656610*a+3972643584)%4294967296},function(a){return(989286798*
a+1740616241)%4294967296},function(a){return(279445565*a+227321191)%4294967296},function(a){return(2525138838*a+2375197675)%4294967296},function(a){return(1391177992*a+2273598062)%4294967296},function(a){return(1765233525*a+3122473841)%4294967296},function(a){return(2543622534*a+3276150337)%4294967296},function(a){return(3538112737*a+1214063340)%4294967296},function(a){return(693746806*a+645677509)%4294967296},function(a){return(2688207442*a+922213198)%4294967296},function(a){return(1083836246*a+
3273423626)%4294967296},function(a){return(879484938*a+649482222)%4294967296},function(a){return(781585411*a+2187620941)%4294967296},function(a){return(4217187924*a+409282534)%4294967296},function(a){return(3997304204*a+3483865819)%4294967296},function(a){return(1890696230*a+3837954244)%4294967296},function(a){return(2400333341*a+2117565765)%4294967296},function(a){return(1894529290*a+1415821789)%4294967296},function(a){return(3934480093*a+82924441)%4294967296},function(a){return(457936083*a+3502020083)%
4294967296},function(a){return(2057448810*a+825873002)%4294967296},function(a){return(70956257*a+3803368919)%4294967296},function(a){return(4111065769*a+577911722)%4294967296},function(a){return(3647861596*a+375847830)%4294967296},function(a){return(2199282009*a+3056603428)%4294967296},function(a){return(3792129462*a+1729987571)%4294967296},function(a){return(222422346*a+2361499571)%4294967296},function(a){return(4133247564*a+158419197)%4294967296},function(a){return(350830640*a+1959352365)%4294967296},
function(a){return(2755092655*a+1161440783)%4294967296},function(a){return(82862384*a+1543109527)%4294967296},function(a){return(900580792*a+332490895)%4294967296},function(a){return(3070307155*a+3661468912)%4294967296},function(a){return(971361265*a+1654498089)%4294967296},function(a){return(677289179*a+7198263575)%4294967296},function(a){return(6660553*a+756084743)%4294967296},function(a){return(4270212011*a+3055539426)%4294967296},function(a){return(818266003*a+478317643)%4294967296},function(a){return(2300183882*
a+2724540749)%4294967296},function(a){return(1239455167*a+4287525061)%4294967296},function(a){return(1674327431*a+2959381535)%4294967296},function(a){return(1557761080*a+904181300)%4294967296},function(a){return(3091725339*a+1656461228)%4294967296},function(a){return(3382005781*a+548587195)%4294967296},function(a){return(1699744644*a+2375814789)%4294967296},function(a){return(461206415*a+3272630411)%4294967296},function(a){return(4253919265*a+1610002264)%4294967296},function(a){return(1722374739*
a+18508135)%4294967296},function(a){return(2781478195*a+912297640)%4294967296},function(a){return(2932242825*a+1470467898)%4294967296},function(a){return(1468777841*a+2252171581)%4294967296},function(a){return(4065977946*a+2041756589)%4294967296},function(a){return(4065541935*a+3069755063)%4294967296},function(a){return(1848980194*a+4228863935)%4294967296},function(a){return(3538842978*a+3998727357)%4294967296},function(a){return(2386075367*a+449534861)%4294967296},function(a){return(1570755505*a+
2888693793)%4294967296},function(a){return(3384579306*a+2943300568)%4294967296},function(a){return(85003996*a+2432628928)%4294967296},function(a){return(1530689766*a+2719707731)%4294967296},function(a){return(3712768560*a+3528889102)%4294967296},function(a){return(1545389839*a+2063356195)%4294967296},function(a){return(3073764864*a+2934051760)%4294967296},function(a){return(1319535090*a+1018889363)%4294967296},function(a){return(373284505*a+2878617539)%4294967296},function(a){return(2308043192*a+
1540808425)%4294967296},function(a){return(257049413*a+2187197116)%4294967296},function(a){return(1236971793*a+2047885819)%4294967296},function(a){return(1159834468*a+1917201741)%4294967296},function(a){return(1742147076*a+2286903607)%4294967296},function(a){return(3278759385*a+266986182)%4294967296},function(a){return(3511465544*a+347133254)%4294967296},function(a){return(1877153612*a+3434064362)%4294967296},function(a){return(3967596395*a+3584163438)%4294967296},function(a){return(613884103*a+708286474)%
4294967296},function(a){return(35703701*a+4130813304)%4294967296},function(a){return(1297962639*a+4140966711)%4294967296},function(a){return(2660497912*a+1126551596)%4294967296},function(a){return(241862048*a+4278701432)%4294967296},function(a){return(2669708151*a+453767951)%4294967296},function(a){return(2416134919*a+1467719160)%4294967296},function(a){return(1219306145*a+4025496583)%4294967296},function(a){return(137280055*a+3249696049)%4294967296},function(a){return(1449367994*a+992152544)%4294967296},
function(a){return(2158449535*a+3045654034)%4294967296},function(a){return(1747619950*a+4293663270)%4294967296},function(a){return(612649435*a+1214441842)%4294967296},function(a){return(2584527756*a+1554855750)%4294967296},function(a){return(374676315*a+2187089729)%4294967296},function(a){return(1458012881*a+895833675)%4294967296},function(a){return(1823044972*a+2970127064)%4294967296},function(a){return(2851766261*a+3049076911)%4294967296},function(a){return(4164906148*a+4001840120)%4294967296},
function(a){return(1815276395*a+1141370741)%4294967296},function(a){return(3830579952*a+1660600801)%4294967296},function(a){return(2873877973*a+2179018429)%4294967296},function(a){return(381812144*a+3181972945)%4294967296},function(a){return(2451455062*a+575893411)%4294967296},function(a){return(1930628369*a+38893017)%4294967296}]}};ccmf.namespace("ccmf.Text");ccmf.Text=function(){};ccmf.Text.create=function(){return new ccmf.Text};
ccmf.Text.prototype={stopWords:"to that a for the that have it is".split(" "),alphabets:"abcdefghijklmnopqrstuvwxyz",bands:20,n:100,shinglesLen:9,register:function(a,c,b,f){var h=ccmf.Data.create(),e=null,e=null,n=[],e=null,e=this.shinglesLen,d;null!=c&&null!=c.k&&(e=c.k);b&&(c=b.author.first,d=b.author.last,b=b.author.email,e=this.removedStopWordShingles(a,e),e=this.shinglesFingerprintConv(e),n[0]=e,e=this.minHashSignaturesGen(n),h.storeLsh(e,f,{author:{first:c,last:d,email:b}}))},search:function(a,
c,b,f){b=ccmf.Data.create();var h=null,h=null,h=this.shinglesLen,e=[],n=null;null!=c&&null!=c.k&&(h=c.k);h=this.removedStopWordShingles(a,h);h=this.shinglesFingerprintConv(h);e[0]=h;n=this.minHashSignaturesGen(e);b.conductLsh(n,f)},isStopWord:function(a){for(var c=0,b=0,c=0,b=this.stopWords.length;c<b;c+=1)if(void 0!=a&&a.toLowerCase()===this.stopWords[c])return!0;return!1},removeStopWords:function(a){var c=0,b=0;a=a.split(" ");c="";c=0;for(b=a.length;c<b;c+=1)this.isStopWord(a[c])&&a.splice(c,1);
return c=a.join(" ")},fixedShinglesWithoutWS:function(a,c){var b=a.replace(/\W/g,"").replace(/ /g,""),f=[],h,e;h=0;for(e=b.length;h<e;h+=1)h+c-1<e&&f.push(b.substr(h,c));return f},removedStopWordShingles:function(a,c){return this.fixedShinglesWithoutWS(this.removeStopWords(a),c)},stopMoreShingles:function(a){a=a.replace(/\W/g,"").split(" ");for(var c=[],b=0,f=0,b=0,f=a.length;b<f;b++)this.isStopWord(a[b])&&(b==f-1?c.push(a[b]):b+1==f-1?c.push(a[b]+" "+a[b+1]):c.push(a[b]+" "+a[b+1]+" "+a[b+2]));return c},
shinglesFingerprintConv:function(a){for(var c=[],b=0,f="",h=0,b=f=0,h=a.length;b<h;b+=1)f=MD5.encode(a[b]).substr(0,8),f=parseInt(f,16),c.push(f);return c},minHashSignaturesGen:function(a){for(var c=this.n,b=[],f=this.hashFnGen(c,4294967296),h=[],e=0,n=0,n="",d=0,p=null,q=0,r=0,s=0,e=p=0,r=a.length;e<r;e+=1){b[e]=[];for(n=0;n<c;n+=1)b[e].push(Infinity);d=0;for(s=a[e].length;d<s;d+=1){n=a[e][d];h=[];p=0;for(q=f.length;p<q;p+=1)h.push(f[p](n));n=0;for(p=b[e].length;n<p;n+=1)h[n]<b[e][n]&&(b[e][n]=h[n])}}return b},
hashFnGen:function(a,c){return MinHashFn.Generate()},compareTwoSignaturesPractical:function(a,c){var b=[],f=0,h=this.n,e=0,n=null;b[0]=a;b[1]=c;n=this.minHashSignaturesGen(b,h);for(f=0;f<h;f++)n[0][f]===n[1][f]&&e++;return 100*(e/h)},LSH:function(a,c){for(var b=this.bands,f=Array(b),h=Array(b),e=null,n=null,d=null,p=null,q=null,d=null,r=0,e=n=null,r=Math.floor(a[0].length/b),e=0;e<b;e++){f[e]=Array(104729);h[e]=[];for(n=0;104729>n;n++)f[e][n]=[];for(n=0;n<a.length;n++){d=[];for(p=e*(r-1)+e;p<e*(r-
1)+e+r;p++)q=a[n][p],d.push(q);d=this.LSHHashingFn(d,104729);f[e][d].push(n);h[e].push(d)}}return e={buckets:f,hashSet:h}},candididatePairsExtraction:function(a){for(var c=0,b=0,f=0,h=0,e=null,n=null,d=[],b=0;b<this.bands;b++)for(f=0;f<a[b].length;f++)if("undefined"!==typeof a[b][f]&&1<a[b][f].length){h=a[b][f];for(e=this.k_combinations(h,2);0<e.length;)n=e.pop(),this.candidateExist(d,h)||d.push(n);c++}return d},LSHHashingFn:function(a,c){for(var b=0,f=0,b=0;b<a.length;b++)f+=Math.pow(a[b],b);return f%
c},k_combinations:function(a,c){var b=0,f=0,h="",e="",n="";if(c>a.length||0>=c)return[];if(c==a.length)return[a];if(1==c){h=[];for(b=0;b<a.length;b++)h.push([a[b]]);return h}h=[];for(b=0;b<a.length-c+1;b++)for(e=a.slice(b,b+1),n=this.k_combinations(a.slice(b+1),c-1),f=0;f<n.length;f++)h.push(e.concat(n[f]));return h},candidateExist:function(a,c){for(var b=0,b=0;b<a.length;b++)if(arr=a[b],arr[0]===c[0]&&arr[1]===c[1])return!0;return!1}};ccmf.namespace("Worker");ccmf.Worker=function(){};ccmf.Worker.create=function(){return new ccmf.Worker};
ccmf.Worker.prototype=function(){return{init:function(){this.dataObj=ccmf.Data.create();var a=this;this.dataObj.signatureLength(function(c){a.signatureLenAtRepo=c.val();a.start();window.setInterval(function(){a.start()},1E4)})},randomNumExist:function(a,c){for(key in a)if(a[key]==c)return!0;return!1},start:function(a){console.log("Begin processing");var c=[],b=[],f=null;a=!1;ccmf.Text.create();for(var h=0;5>h;h++){do{var e=Math.floor(Math.random()*this.signatureLenAtRepo);a=0<b.length&&this.randomNumExist(b,
e)?!0:!1}while(a);b.push(e);this.dataObj.repoSignaturesOp("r",null,e,e,function(a){f=a.exportVal();c.push(f);5==c.length&&ccmf.Worker.create().process(c,b)})}},process:function(a,c){var b=[],f=null,h=[],e=[],n=ccmf.Text.create(),d=[],p=null;this.dataObj=ccmf.Data.create();for(var q=0;q<a.length;q++)for(timestamp in p=a[q],h[c[q]]=[],p){e=[];for(elem=0;elem<Object.keys(p[timestamp]).length;elem++)"domain"==Object.keys(p[timestamp])[elem]?h[c[q]].domain=p[timestamp][Object.keys(p[timestamp])[elem]]:
"path"==Object.keys(p[timestamp])[elem]?h[c[q]].path=p[timestamp][Object.keys(p[timestamp])[elem]]:".priority"==Object.keys(p[timestamp])[elem]?f=p[timestamp][Object.keys(p[timestamp])[elem]]:e.push(p[timestamp][Object.keys(p[timestamp])[elem]][".value"]);if(h[c[q]].domain!=this.dataObj.currentDomain()||h[c[q]].path!=this.dataObj.currentPathURL())b[f]=e;else for(e=0;e<c.length;e++)c[e]==f&&(c=c.splice(e,1))}if(0<b.length){f=[];for(d=0;d<c.length;d++)f.push(b[c[d]]);d=n.LSH(f,20)}0<d.length&&this.result(d,
h,c)},result:function(a,c,b){this.dataObj=ccmf.Data.create();var f=null,h=null,e=[];for(setIdx=0;setIdx<b.length;setIdx++){f=b[setIdx];e[f]=[];for(var n=0;n<a.length;n++)a[n][0]==setIdx?h=b[a[n][1]]:a[n][1]==setIdx&&(h=b[a[n][0]]),a[n][0]!=setIdx&&a[n][1]!=setIdx||e[f].push({orig_idx:f,orig_domain:c[f].domain,orig_path:c[f].path,tracked_idx:h,tracked_domain:c[h].domain,tracked_path:c[h].path})}this.dataObj.identifiedSignatures(e);console.log("End Processing")}}}();
